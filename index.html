<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/x-icon" href="img/favicono.png">
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Select2 -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <title>Mapis</title>
</head>

<body>

    <div id="map"></div>

    <div id="sidebar">
        <h2 class="tituloSideBar">MAPIS</h2>
        <table class="tabla">
            <tr class="fila">
                <th>
                    <input type="text" class="input" id="direccion" placeholder="Escribe una localización">
                </th>
                <th>
                    <button class="btnBuscar" id="btnBuscar">
                        <img src="img/lupa.png" alt="Buscar" style="width:20px; height:20px; vertical-align:middle; left: 10px;"/>
                    </button>
                </th>
            </tr>
        </table>
    <select class="selector" id="selectorCiudad">
        <option value="0" selected disabled>Seleccione una localización</option>
        <option value="1">León</option>
        <option value="2">Toro</option>
        <option value="3">San Petersburgo</option>
        <option value="4">Nashville</option>
        <option value="5">Vigo</option>
    </select>
    <select class="selector2" id="selectorCategoria">
        <option value="0" selected disabled>Seleccione una categoría</option>
        <option value="1" data-icon="img/church.png">Iglesia</option>
        <option value="2" data-icon="img/airpark.png">Parque aéreo</option>
        <option value="3" data-icon="img/airport.png">Aeropuerto</option>
        <option value="4" data-icon="img/castle.png">Castillo</option>
        <option value="5" data-icon="img/chicken.png">Parrilla</option>
        <option value="6" data-icon="img/estatua.png">Estatua/Monumento</option>
        <option value="7" data-icon="img/hospital.png">Hospital</option>
        <option value="8" data-icon="img/mall.png">Centro Comercial</option>
        <option value="9" data-icon="img/mirador.png">Mirador</option>
        <option value="10" data-icon="img/museum.png">Museo</option>
        <option value="11" data-icon="img/palace.png">Palacio</option>
        <option value="12" data-icon="img/park.png">Parque</option>
        <option value="13" data-icon="img/restaurant.png">Restaurante</option>
        <option value="14" data-icon="img/walkingtour.png">Paseo</option>
    </select>

    <div id="lista"></div>

    <script>
  $(document).ready(function () {
    function formatOption(option) {
      if (!option.id) return option.text;
      const icon = $(option.element).data('icon');
      if (icon) {
        return $(`<span><img src="${icon}" /> ${option.text}</span>`);
      }
      return option.text;
    }

    // Inicializar Select2
    $('#selectorCategoria').select2({
      templateResult: formatOption,
      templateSelection: formatOption,
      minimumResultsForSearch: -1
    });

    // Ejemplo: agregar opción nueva dinámicamente
    $('#addOption').click(function () {
      // Agrega una nueva opción con su data-icon
      $('#selectorCategoria').append('<option value="4" data-icon="img/castle.png">Castillo</option>');

      // Actualiza Select2 para que detecte la nueva opción
      $('#selectorCategoria').trigger('change.select2');
    });
  });
  </script>

    <div class="botones">
        <button class="btn" id="btnLimpiar">Limpiar mapa</button>
    </div>

     <div id="contenido">
    </div>

    <a id="abrir" class="abrir-cerrar" onclick="mostrar()">☰</a>
    <a id="cerrar" class="abrir-cerrar" onclick="ocultar()">✕</a>

        <script async
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRK6MM-HR0JEwBe7tOkFhek6XGcxsg3QE&loading=async&callback=initMap">
        </script>

        <script src="js/script.js" async></script>

</body>

</html>